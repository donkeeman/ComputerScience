# 교착 상태 (Deadlock)
- 두 개 이상의 작업이 원하는 자원을 서로 가져가서, 다른 작업이 끝나서 자원을 반환하기만을 기다리는 상태
- 교착 상태의 작업들은 영원히 끝나지 않음
- 교착 상태를 완전히 막거나 해결하는 것은 불가능
- 식사하는 철학자 문제

## 교착 상태의 조건
|조건|내용|
|:--:|:--:|
|상호 배제|자원은 한 프로세스에만 할당될 수 있음|
|점유와 대기|프로세스는 할당된 자원을 가진 상태로 필요한 다른 자원을 기다림|
|비선점|자원이 사용 중이라면 프로세스는 그 자원을 억지로 뺏을 수 없음|
|순환 대기|각 프로세스는 다음 프로세스가 필요로 하는 자원을 가지고 있고, 프로세스들은 순환 구조로 되어 있음|
- 위의 4가지 조건을 모두 만족하면 교착 상태가 됨

## 교착 상태의 예방
- 효율성이 떨어짐
- 비용 증가
### 상호 배제 예방
- 자원을 공유 가능하게 하기
- 공유 자체가 불가능한 자원도 있음
### 점유 대기 예방
- 한 프로세스가 끝난 후 다음 프로세스를 실행할 수 있도록 하기
- 기아 상태, 무한 대기 등의 문제 발생
### 비선점 예방
- 특정 조건에 따라 자원을 선점할 수 있는 프로토콜 만들기
### 순환 대기 예방
- 자원에 순서를 매기기

## 교착 상태의 회피
- 프로세스에게 어떤 자원을 필요로 하는지의 정보를 제공하도록 요구
- 자원 할당 상태를 미리 검사하여 교착 상태가 생길 것 같은지 예측
### 자원 할당 그래프 알고리즘 (Resource Allocation Graph Algorithm)
- 자원의 인스턴스가 한 개일 때 사용
- 프로세스가 자원 요청 (요청 엣지)
- 프로세스에 자원 할당(할당 엣지)
- 프로세스가 언젠가 자원을 요청할 예정(클레임 엣지)
- 서클 탐지 알고리즘을 사용하여 순환 대기가 발생하는지 탐지
### 은행원 알고리즘 (Banker's Algorithm)
- 자원의 인스턴스가 여러 개일 때 사용
- 각 프로세스가 가질 수 있는 자원의 최대 양 (Max)
- 각 프로세스가 현재 보유 중인 자원의 양 (Allocate)
- 현재 사용 가능한 자원의 양 (Available)
- 프로세스가 요청한 자원의 양이 현재 사용 가능한 자원의 양보다 작거나 같은 경우에만 자원 할당
- 프로세스가 요청한 자원의 양이 현재 사용 가능한 자원의 양보다 크면 자원의 양이 충분해질 때까지 대기

## 교착 상태의 무시
- 교착 상태를 예방하거나 회피하기 위한 프로그래밍은 성능에 영향을 끼칠 수 있으므로, 큰 문제가 아니라면 대책을 세우지 않음

## 참고 사이트
- https://ko.wikipedia.org/wiki/%EA%B5%90%EC%B0%A9_%EC%83%81%ED%83%9C
- https://www.geeksforgeeks.org/resource-allocation-graph-rag-in-operating-system/
- https://www.geeksforgeeks.org/bankers-algorithm-in-operating-system-2/